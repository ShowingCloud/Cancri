<h1 class="page-header">
  <%= t('activerecord.models.user') %>列表
  <small class="pull-right">
    <a href="<%= new_admin_user_path %>" class="btn btn-default">
      <i class="icon-plus icon-only"></i></a>

    <a href="#" class="btn btn-default btn-search-toggle">
      <i class="icon-search icon-only"></i>
    </a>
  </small>
</h1>


<div class="panel panel-info form-search-toggle <%= params[:field].present? && params[:keyword].present? ? 'show' : 'show' %>">
  <div class="panel-heading">
    搜索
  </div>
  <div class="panel-body">
    <form class="form" role="form" method="get">

      <div class="form-group col-md-3">
        <select name="field" class="form-control">
          <option value="nickname" <%= params[:field] == 'nickname' ? 'selected=selected' : '' %>><%= t('simple_form.labels.defaults.nickname') %></option>
          <option value="mobile" <%= params[:field] == 'mobile' ? 'selected=selected' : '' %>><%= t('simple_form.labels.defaults.mobile') %></option>
          <option value="email" <%= params[:field] == 'email' ? 'selected=selected' : '' %>><%= t('simple_form.labels.defaults.email') %></option>
          <option value="username" <%= params[:field] == 'username' ? 'selected=selected' : '' %>><%= t('simple_form.labels.defaults.username') %></option>
          <option value="id" <%= params[:field] == 'id' ? 'selected=selected' : '' %>>ID</option>
        </select>
      </div>
      <div class="form-group col-md-9">
        <input name="keyword" class="form-control input" value="<%= params[:keyword] %>" type="text" placeholder="输入关键字，按回车键提交">
      </div>
    </form>
  </div>
</div>


<table class="table table-bordered table-hover table-striped">
  <thead>
  <tr>
    <th>ID</th>
    <th><%= t('simple_form.labels.defaults.nickname') %></th>
    <th><%= t('simple_form.labels.defaults.mobile') %></th>
    <th><%= t('simple_form.labels.defaults.email') %></th>
    <th><%= t('simple_form.labels.defaults.username') %></th>
    <th><%= t('simple_form.labels.defaults.sign_in_count') %></th>
    <th><%= t('simple_form.labels.defaults.current_sign_in_at') %></th>


    <th>操作</th>
  </tr>
  </thead>


  <tbody>
  <% @users.each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.nickname %></td>
        <td><%= user.mobile %></td>
        <td><%= user.email %></td>
        <td><%= user.username %></td>
        <td><%= user.sign_in_count %></td>
        <td><%= user.current_sign_in_at.try(:strftime, '%Y-%m-%d %H:%M:%S') %></td>
        <td><%= link_to [:admin, user], title: '查看', class: 'btn btn-xs btn-warn' do %>
              <i class="icon-eye-open bigger-120"></i>
          <% end %>
          <%= link_to edit_admin_user_path(user), title: '编辑', class: 'btn btn-xs btn-info' do %>
              <i class="icon-edit bigger-120"></i>
          <% end %>
          <%= link_to [:admin, user], method: :delete, data: {confirm: '确认删除吗?'}, title: '删除', class: 'btn btn-xs btn-danger' do %>
              <i class="icon-trash bigger-120"></i>
          <% end %>

          </tr>
  <% end %>
  </tbody>
</table>

<nav>
  <%= paginate @users %>
</nav>

